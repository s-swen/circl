<!-- templates/dash/contact_list.html -->
{% extends 'dash/base.html' %}

{% block content %}
<h2 class="card-title">Contact Management</h2>

<div class="card">
    <h3 class="card-title">Add New Contact</h3>
    <form method="post" action="{% url 'add-contact' %}">
        {% csrf_token %}
        <div class="form-group">
            <input type="text" name="first_name" class="form-control" placeholder="Enter first name" required>
        </div>
        <div class="form-group">
            <input type="text" name="last_name" class="form-control" placeholder="Enter last name" required>
        </div>
        <div class="form-group">
            <select name="category" class="form-control" required>
                {% for value, label in category_choices %}
                    <option value="{{ value }}">{{ label }}</option>
                {% endfor %}
            </select>
        </div>
        <button type="submit" class="btn"><i class="bi bi-plus"></i> Add Contact</button>
    </form>
</div>

{% for category, category_name in category_choices %}
<div class="card">
    <h3 class="card-title">{{ category_name }} Contacts</h3>
    <ul class="contact-list">
        {% for contact in contacts %}
        {% if contact.category == category %}
        <li class="contact-item">
            <a href="{% url 'contact-detail' contact.id %}">{{ contact.first_name }} {{ contact.last_name }}</a>
            <div>
                <a href="{% url 'edit-contact' contact.id %}" class="btn btn-sm btn-primary"><i class="bi bi-pencil"></i></a>
                <form method="post" action="{% url 'delete-contact' contact.id %}" style="display: inline;">
                    {% csrf_token %}
                    <button type="submit" class="btn btn-sm btn-danger"><i class="bi bi-trash"></i></button>
                </form>
            </div>
        </li>
        {% endif %}
        {% endfor %}
    </ul>
</div>
{% endfor %}

{% endblock %}